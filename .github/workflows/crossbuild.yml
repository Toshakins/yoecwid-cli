name: crossbuilder
on:
  push:
    branches: [ master ]
  workflow_dispatch:
    
jobs:
  Crossbuild:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: ðŸ¤ª Set up Go
        uses: actions/setup-go@v2
        with:
          go-version: 1.17
      - name: ðŸ¤¯ Build binaries
        run: ./build.sh
      - name: configure git
        run: git remote set-url origin https://$GITHUB_ACTOR:$GTIHUB_TOKEN@github.com/Toshakins/yoecwid-cli.git 
      - name: commit built changes
        run: git add ./bin/ && git commit -m "build binaries for $GITHUB_SHA"
      - name: push commited binaries
        run: git push origin master
